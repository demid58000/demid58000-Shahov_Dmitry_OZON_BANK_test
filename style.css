* {
    margin: 0;
    padding: 0;
    border: 0;
    box-sizing: border-box;
}

html {
    min-height: 100%;
    -webkit-text-size-adjust: 100%;
}

body {
    background: #efeff4;
    min-height: 100vh;
    min-height: 100dvh;
}

/* ===== ПРОГРЕСС-ВИДЖЕТ: стили изолированы под .progress-widget для переиспользования ===== */

/* ПОРТРЕТ: фиксированный блок 320×568 */
.progress-widget.form {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 320px;
    height: 568px;
    margin: 0 auto;
    padding: 64px 16px 24px 16px;
    background: #ffffff;
}

.progress-widget.form > p:first-of-type {
    position: absolute;
    top: 16px;
    left: 16px;
    margin: 0;
    z-index: 10;
}

.progress-widget .form-bar {
    position: relative;
    width: 160px;
    height: 160px;
    margin: 0 0 82px 0;
    flex-shrink: 0;
}

.progress-widget .form-layout {
    position: relative;
    width: 180px;
    text-align: left;
    overflow: hidden;
    margin: 0;
    flex-shrink: 0;
}

/* АЛЬБОМНАЯ ОРИЕНТАЦИЯ: круг слева, виджеты справа, всё помещается на экран */
@media (orientation: landscape) {
    html {
        overflow: hidden;
        height: 100%;
    }

    body {
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0;
        padding: 0;
        width: 100%;
        min-height: 100vh;
        min-height: 100dvh;
        height: 100vh;
        height: 100dvh;
        overflow: hidden;
    }

    .progress-widget.form {
        position: relative;
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        align-items: center;
        justify-content: flex-start;
        gap: 12px;
        width: 568px;
        height: 320px;
        max-width: 100vw;
        max-height: 100vh;
        max-height: 100dvh;
        min-width: 0;
        min-height: 0;
        padding: 12px;
        padding-top: max(12px, env(safe-area-inset-top));
        padding-left: max(12px, env(safe-area-inset-left));
        padding-right: max(12px, env(safe-area-inset-right));
        padding-bottom: max(12px, env(safe-area-inset-bottom));
        margin: 0;
        background: #ffffff;
        overflow: hidden;
    }

    .progress-widget.form > p:first-of-type {
        position: absolute;
        top: max(12px, env(safe-area-inset-top));
        left: max(12px, env(safe-area-inset-left));
        margin: 0;
        z-index: 10;
    }

    .progress-widget .form-bar {
        order: -1;
        width: 160px;
        height: 160px;
        min-width: 160px;
        min-height: 160px;
        margin: 0;
        flex-shrink: 0;
    }

    .progress-widget .form-layout {
        order: 0;
        width: 180px;
        min-width: 0;
        margin: 0;
        flex-shrink: 1;
        overflow: visible;
        max-height: 100%;
        min-height: 0;
    }
}

/* ДЕСКТОП: карточка 320px, круг сверху */
@media (min-width: 569px) and (min-height: 601px) {
    html {
        overflow: auto;
        height: auto;
    }

    body {
        overflow: auto;
        height: auto;
    }

    .progress-widget.form {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        gap: 24px;
        padding: 64px 24px 24px 24px;
        width: 320px;
        height: auto;
        min-height: auto;
        margin: 0 auto;
        background: #ffffff;
    }

    .progress-widget.form > p:first-of-type {
        position: absolute;
        top: 24px;
        left: 24px;
        margin: 0;
        z-index: 10;
    }

    .progress-widget .form-bar {
        position: relative;
        width: 160px;
        height: 160px;
        margin: 0;
        flex-shrink: 0;
    }

    .progress-widget .form-layout {
        position: relative;
        width: 180px;
        margin: 0;
        flex-shrink: 0;
    }
}

.progress-widget .form-bar--animated {
    animation: progress-widget-rotate 3s linear infinite;
}

@keyframes progress-widget-rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.progress-widget canvas {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    vertical-align: top;
}

.progress-widget p {
    font: 300 16px Helvetica;
}

.progress-widget .form-layout__item {
    position: relative;
    box-sizing: border-box;
    background: #ffffff;
}

.progress-widget .form-layout__item p {
    margin: 0 0 0 69px;
    height: 44px;
    color: #000000;
    font-size: 18px;
    line-height: 44px;
}

.progress-widget .form-layout__item:nth-child(1) p {
    border: 0;
}

.progress-widget input[type="checkbox"] {
    display: none;
}

.progress-widget .form-layout__input {
    text-indent: 10px;
    position: absolute;
    top: 0;
    bottom: 0;
    right: 120px;
    margin: auto;
    width: 48px;
    height: 30px;
    border-radius: 32px;
    font-family: Helvetica;
    font-size: 16px;
    border: 1px solid #555555;
}

.progress-widget input[type="text"]:focus {
    outline: none;
    border: 1px solid #0728bb;
}

.progress-widget .form-layout__item-toggle {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 120px;
    margin: auto;
    width: 51px;
    height: 31px;
}

.progress-widget .form-layout__item-toggle label,
.progress-widget .form-layout__item-toggle i {
    box-sizing: border-box;
    display: block;
    background: #555555;
}

.progress-widget .form-layout__item-toggle label {
    width: 51px;
    height: 32px;
    border-radius: 32px;
    transition: all 0.30s ease;
}

.progress-widget .form-layout__item-toggle i {
    position: absolute;
    top: 2px;
    left: 2px;
    width: 28px;
    height: 28px;
    border-radius: 28px;
    box-shadow: 0 0 1px 0 rgba(0,0,0, 0.25),
                0 3px 3px 0 rgba(55, 55, 55, 0.78);
    background: #cbcbcb;
    transition: all 0.3s cubic-bezier(0.275, -0.450, 0.725, 1.450);
}

.progress-widget input[type="checkbox"]:active + .form-layout__item-toggle i {
    width: 35px;
}

.progress-widget input[type="checkbox"]:active + .form-layout__item-toggle label,
.progress-widget input[type="checkbox"]:checked + .form-layout__item-toggle label {
    border: 16px solid #1225d4;
}

.progress-widget input[type="checkbox"]:checked + .form-layout__item-toggle i {
    left: 21px;
    border: 2px solid white;
    background: white;
}

.progress-widget input[type="checkbox"]:checked:active + .form-layout__item-toggle label {
    border: 16px solid #555555;
}

.progress-widget input[type="checkbox"]:checked:active + .form-layout__item-toggle i {
    left: 14px;
}